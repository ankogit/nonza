# –ì—Ä–æ–º–∫–æ—Å—Ç—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ (–º–Ω–æ–∂–∏—Ç–µ–ª—å 0‚Äì500%)

–ö—Ä–∞—Ç–∫–æ: –∫–∞–∫ –≤ –≤–∏–¥–∂–µ—Ç–µ `VideoParticipant` —É—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Web Audio API –≤–º–µ—Å—Ç–æ LiveKit/—ç–ª–µ–º–µ–Ω—Ç–∞.

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞

–£ `HTMLMediaElement.volume` –¥–æ–ø—É—Å—Ç–∏–º —Ç–æ–ª—å–∫–æ –¥–∏–∞–ø–∞–∑–æ–Ω **0‚Äì1**:

- `0` ‚Äî —Ç–∏—à–∏–Ω–∞
- `1` ‚Äî ¬´100%¬ª, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞

–ó–Ω–∞—á–µ–Ω–∏—è –±–æ–ª—å—à–µ 1 –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫—É:

```text
IndexSizeError: The volume provided (2) is outside the range [0, 1]
```

LiveKit –≤ `RemoteParticipant.setVolume(volume)` –∏ –≤ `RemoteAudioTrack` –≤ –∏—Ç–æ–≥–µ –ø–∏—à–µ—Ç –≤ `element.volume` –∏–ª–∏ –≤ —Å–≤–æ–π `GainNode`. –¢–∞–º, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç, –ª–∏–º–∏—Ç 0‚Äì1 –Ω–µ–ª—å–∑—è –æ–±–æ–π—Ç–∏. –ü–æ—ç—Ç–æ–º—É ¬´–º–Ω–æ–∂–∏—Ç–µ–ª—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏¬ª –≤—ã—à–µ 100% –º—ã –¥–µ–ª–∞–µ–º —Å–∞–º–∏.

---

## –†–µ—à–µ–Ω–∏–µ: —Å–≤–æ–π –≥—Ä–∞—Ñ Web Audio

–î–ª—è **—É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ** —É—á–∞—Å—Ç–Ω–∏–∫–∞ –º—ã –Ω–µ –≤–µ—à–∞–µ–º —Ç—Ä–µ–∫ –Ω–∞ `<audio>` —á–µ—Ä–µ–∑ LiveKit –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ–º `setVolume()`. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å—Ç—Ä–æ–∏—Ç—Å—è —Å–≤–æ–π –≥—Ä–∞—Ñ Web Audio:

```text
MediaStreamTrack (–º–∏–∫—Ä–æ—Ñ–æ–Ω —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞)
        ‚Üì
  new MediaStream([track])
        ‚Üì
  AudioContext.createMediaStreamSource(stream)
        ‚Üì
  AudioContext.createGain()   ‚Üê –º–Ω–æ–∂–∏—Ç–µ–ª—å 0‚Äì5 (0‚Äì500%)
        ‚Üì
  context.destination (–∫–æ–ª–æ–Ω–∫–∏)
```

- **–ò—Å—Ç–æ—á–Ω–∏–∫:** `createMediaStreamSource(new MediaStream([track.mediaStreamTrack]))` ‚Äî –æ–¥–∏–Ω –∞—É–¥–∏–æ—Ç—Ä–µ–∫ –∏–∑ LiveKit.
- **–£—Ä–æ–≤–µ–Ω—å:** `GainNode.gain` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–µ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ. –ú—ã —Ö—Ä–∞–Ω–∏–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (0‚Äì500) –∏ –ø–µ—Ä–µ–¥–∞—ë–º –≤ –≥—Ä–∞—Ñ –∫–∞–∫ `volume / 100` (0‚Äì5).
- **–í—ã—Ö–æ–¥:** `gain.connect(ctx.destination)` ‚Äî –∑–≤—É–∫ –∏–¥—ë—Ç –≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã–≤–æ–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–¢–∞–∫ –º–Ω–æ–∂–∏—Ç–µ–ª—å 0‚Äì500% —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `HTMLMediaElement.volume`.

---

## –ì–¥–µ —ç—Ç–æ –≤ –∫–æ–¥–µ

| –ß—Ç–æ                                        | –ì–¥–µ                                                                                |
| ------------------------------------------ | ---------------------------------------------------------------------------------- |
| –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–∏–∞–ø–∞–∑–æ–Ω–∞                        | `VOLUME_MIN = 0`, `VOLUME_MAX = 500`                                               |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–∞                         | `volume` (ref, 0‚Äì500)                                                              |
| –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞                             | `setupVolumeGraph(track)` ‚Äî AudioContext, Source, GainNode, `connect`              |
| –°–±—Ä–æ—Å –≥—Ä–∞—Ñ–∞                                | `teardownVolumeGraph()` ‚Äî `disconnect`, `close` –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞                          |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ —Å–ª–∞–π–¥–µ—Ä–∞ | `onVolumeInput` ‚Üí `volumeGainNodeRef.value.gain.setTargetAtTime(v / 100, 0, 0.05)` |
| Refs –≥—Ä–∞—Ñ–∞                                 | `volumeAudioContextRef`, `volumeGainNodeRef`, `volumeSourceNodeRef`                |

–ì—Ä–∞—Ñ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ `remoteLiveKitAudioTrack` (watch –≤ –∫–æ–Ω—Ü–µ —Å–∫—Ä–∏–ø—Ç–∞) –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ/–ø—Ä–æ–ø–∞–∂–µ —Ç—Ä–µ–∫–∞ –∏ –≤ `onUnmounted`.

---

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. **–û—Ç–∫—Ä—ã—Ç–∏–µ:** –∫–ª–∏–∫ –ø–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (üîä) —É —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å —Å –ø–æ–ª–∑—É–Ω–∫–æ–º.
2. **–ü–æ–ª–∑—É–Ω–æ–∫:** `type="range"` –æ—Ç 0 –¥–æ 500, —à–∞–≥ 5, –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (0‚Äì500%).
3. **–ó–∞–∫—Ä—ã—Ç–∏–µ:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ –ø–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—É –∏–ª–∏ –∫–ª–∏–∫ –≤–Ω–µ –ø–∞–Ω–µ–ª–∏ (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ `document`).

–õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è: `volumeMenuOpen`, `volumeWrapRef`, `toggleVolumeMenu`, watch –Ω–∞ –∫–ª–∏–∫ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏.

---

## –õ–æ–∫–∞–ª—å–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –∏ preview

–î–ª—è **–ª–æ–∫–∞–ª—å–Ω–æ–≥–æ** —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ –≤ —Ä–µ–∂–∏–º–µ **preview** –ø–∞–Ω–µ–ª—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è (–Ω–µ—Ç —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞). –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–≤—É–∫ –∏–¥—ë—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ, –±–µ–∑ —ç—Ç–æ–≥–æ –≥—Ä–∞—Ñ–∞.

---

## –°—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```text
[–°–µ—Ä–≤–µ—Ä LiveKit]
       ‚Üì RTP
[RemoteAudioTrack]  ‚Üê remoteLiveKitAudioTrack
       ‚Üì .mediaStreamTrack
[MediaStream] ‚Üí [MediaStreamAudioSourceNode] ‚Üí [GainNode] ‚Üí [destination]
                      ‚Üë                              ‚Üë
                 volumeSourceNodeRef           volumeGainNodeRef
                                                 gain = volume/100
                                                      ‚Üë
                                            —Å–ª–∞–π–¥–µ—Ä 0‚Äì500%
```

---

## –í–∞–∂–Ω–æ

- –ì—Ä–∞—Ñ –∂–∏–≤—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –µ—Å—Ç—å `remoteLiveKitAudioTrack` –¥–ª—è —ç—Ç–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞; –ø—Ä–∏ —Å–º–µ–Ω–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —Ç—Ä–µ–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `teardownVolumeGraph()`.
- `setTargetAtTime(v/100, 0, 0.05)` ‚Äî –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –±–µ–∑ —â–µ–ª—á–∫–æ–≤.
- –û–¥–∏–Ω –≤–∏–¥–∂–µ—Ç ‚Äî –æ–¥–∏–Ω —É—á–∞—Å—Ç–Ω–∏–∫, –∑–Ω–∞—á–∏—Ç –æ–¥–∏–Ω –≥—Ä–∞—Ñ –Ω–∞ –æ–¥–∏–Ω `VideoParticipant`. –ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –Ω–µ—Ç.
